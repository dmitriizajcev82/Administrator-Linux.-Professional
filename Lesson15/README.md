
# Цель:
 - Работать с процессами

написать свою реализацию lsof. Результат ДЗ - рабочий скрипт который можно запустить

## lsof
  команда Unix/Linux, которая отображает все открытые файлы или идентифицирует процессы, открытые конкретными файлами. Удобная для оценки безопасности ИС, а также для устранения проблем lsof предлагает широкий спектр параметров, позволяющие использовать её различными способами - иногда даже превосходя команду ps для просмотра процессов и команду netstat для исследования сетевых интерфейсов.

## Что такое открытые файлы?
Для начала давайте рассмотрим, что такое открытые файлы и почему они вам могут быть интересны. Открытые файлы - это файлы, которые использует какой-либо процесс. Этот процесс может быть командой, которую вы выполняете, или приложением, запущенным на сервере, которым вы управляете. Открытые файлы могут включать файлы данных и библиотеки, которые предоставляют общие процедуры. Многие файлы открываются каждый раз, когда вы входите в систему.

## Принцип работы lsof?
При применении команды lsof без параметров в терминале выводятся все файлы, которые открыты (используются) в вашей системе. Если вы запустите lsof от своего имени, вы получите длинный список файлов, но выходные данные будут включать в себя множество сообщений об отказе в разрешении - многие из них представляют открытые файлы в файловой системе /proc, которые вам не разрешено видеть. Запустите команду от имени root, и вы увидите больше выходных данных.

Для примера рассмотрим пример сетевой диагностики, а также открытые файлы user и root.

~~~shell
#!/bin/bash
# open file user
echo "****************USER**************************"
lsof | wc -l
# open file ROOT
echo "****************ROOT**************************"
sudo lsof | wc -l

echo "**********************************************"
files=$(sudo lsof -P -i -n | cut -f 1 -d " " | uniq | tail -n +2)
printf "$files"
echo "**********************************************"
lsof -iTCP | grep firefox
echo "**********************************************"
sudo lsof -iTCP | grep ssh

exit 0
~~~
Результат работы скрипта.

[![lsof.jpg](https://s.iimg.su/s/01/t8WmMwdkqTpyntEi0hAwVUVZVuyZ4PSUWuBudG5m.jpg)](https://iimg.su/i/Wg9vS)